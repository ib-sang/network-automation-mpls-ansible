enable
conf t 
!
ip vrf A
 rd 10.255.255.20:1
 route-target export 10.255.255.20:1
 route-target import 10.255.255.21:1
!
ip vrf B
 rd 10.255.255.30:2
 route-target export 10.255.255.30:2
 route-target import 10.255.255.31:2
!
!
interface GigabitEthernet0/0
 ip vrf forwarding A
 ip address 10.255.10.2 255.255.255.252
 ip ospf 2 area 0
 no sh
!
interface GigabitEthernet1/0
 ip vrf forwarding B
 ip address 10.255.20.2 255.255.255.252
 no sh
!
!
router eigrp 200
 !
 address-family ipv4 vrf B
  redistribute bgp 64512 metric 1500 100 255 1 1500
  network 10.255.11.0 0.0.0.3
  autonomous-system 200
 exit-address-family
!
router ospf 2 vrf A
 redistribute bgp 64512 subnets
 network 10.255.21.0 0.0.0.3 area 0
!
!
router bgp 64512
 bgp log-neighbor-changes
 neighbor 10.255.255.11 remote-as 64512
 neighbor 10.255.255.11 remote-as 64512
 neighbor 10.255.255.11 remote-as 64512
 neighbor 10.255.255.11 update-source Loopback0
 !
 address-family ipv4
  neighbor 10.255.255.11 activate
 exit-address-family
 !
 address-family vpnv4
  neighbor 10.255.255.11 activate
  neighbor 10.255.255.11 send-community extended
 exit-address-family
 !
 address-family ipv4 vrf A
  redistribute ospf 2
 exit-address-family
 !
 address-family ipv4 vrf B
  redistribute eigrp 200
 exit-address-family
!